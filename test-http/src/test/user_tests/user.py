# Tests in this file use the secretariat credentials and exercise the user
# endpoint as defined by USER_URL.
import copy
import json
import random
import requests
import uuid
from src import env, utils
from src.utils import (assert_contains, ok_response_contains,
                       ok_response_contains_json, response_contains,
                       response_contains_json)


#### GET /users ####
def test_get_all_users():
    """ secretariat users can request a list of all users """
    res = requests.get(
        f'{env.AWG_BASE_URL}/users',
        headers=utils.BASE_HEADERS
    )
    print(json.loads(res.content.decode()))
    assert res.status_code == 200
    #ok_response_contains(res, '"active_roles":["SECRETARIAT","CNA"]')
    #assert len(json.loads(res.content.decode())['short_name']) >= 1