const swaggerAutogen = require('swagger-autogen')({ openapi: '3.0.2' })
const outputFile = 'docs/swagger_output.json'
const endpointsFiles = [
  'src/controller/cve-id.controller/index.js'
]

const doc = {
  info: {
    version: '3.0.2',
    title: 'CVE Services API',
    description: 'The CVE services API which supports automation tooling for the CVE Project.'
  },
  components: {
    parameters: {
      apiEntityHeader: {
        in: 'header',
        name: 'CVE-API-ORG',
        description: 'The shortname for the entity (e.g., CNA, ADP) that is authenticated or requesting authentication.',
        required: true,
        schema: {
          type: 'string'
        }
      },
      apiUserHeader: {
        in: 'header',
        name: 'CVE-API-USER',
        description: 'The username for the account that is making the request.',
        required: true,
        schema: {
          type: 'string'
        }
      },
      apiSecretHeader: {
        in: 'header',
        name: 'CVE-API-KEY',
        description: 'The user\'s API key.',
        required: true,
        schema: {
          type: 'string'
        }
      }
    }
  }
}

swaggerAutogen(outputFile, endpointsFiles, doc)
